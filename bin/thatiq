#!/usr/bin/env node

const path = require('path')

const program = require('commander')
const task = require('@jonggrang/task')

const app = require('../dist/server')


program.version('0.1.0')

program
  .command('runserver [config]')
  .alias('rs')
  .description('run server using specied config file')
  .option('-e, --env-file <file>', '.env to parse before running the app')
  .action(function (config, opts) {
    config = config || path.resolve(process.cwd(), 'connf', 'thatiq.conf');
    const env = opts.envFile || path.resolve(process.cwd(), '.env');
    task.launchTask(app.startServer(config, env));
  })

program.parse(process.argv)
